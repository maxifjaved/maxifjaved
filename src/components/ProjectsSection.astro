---
import { portfolioData } from "../data/projects";

// Get featured projects (limit to 6 for homepage)
const featuredProjects = portfolioData.projects
  .filter(project => project.featured)
  .slice(0, 6);

const filterTabs = [
  { label: "All", value: "all" },
  { label: "EdTech", value: "edtech" },
  { label: "Interactive Displays", value: "interactive-displays" },
  { label: "Business Intelligence", value: "business-intelligence" },
  { label: "Cybersecurity", value: "cybersecurity" },
  { label: "Insurance Tech", value: "insurance-tech" },
];
---

<section id="projects" class="py-24 relative overflow-hidden">
  <div
    class="absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-cyber-dark to-transparent"
  ></div>
  <div
    class="absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-cyber-dark to-transparent"
  ></div>

  <div class="max-w-7xl mx-auto px-6 relative">
    <div class="flex justify-center mb-16">
      <div class="relative">
        <h2 class="text-3xl md:text-4xl font-bold text-center">
          Featured{" "}
          <span class="text-cyber-blue text-shadow-glow">Projects</span>
        </h2>
        <div class="h-1 w-32 bg-cyber-blue mt-4 mx-auto rounded-full glow"></div>
      </div>
    </div>

    <div x-data="{ activeTab: 'all' }">
      <div class="flex flex-wrap justify-center gap-4 mb-12">
        {filterTabs.map((tab) => (
          <button
            x-on:click={`activeTab = '${tab.value}'`}
            x-bind:class={`{
              'bg-cyber-blue text-cyber-dark': activeTab === '${tab.value}', 
              'bg-transparent border border-cyber-blue text-cyber-blue': activeTab !== '${tab.value}'
            }`}
            class="cyber-btn py-2 px-6 transition-all duration-300"
          >
            {tab.label}
          </button>
        ))}
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {featuredProjects.map((project, index) => {
          const categoryDisplay = {
            'edtech': 'EdTech',
            'interactive-displays': 'Interactive Displays',
            'business-intelligence': 'Business Intelligence',
            'cybersecurity': 'Cybersecurity',
            'insurance-tech': 'Insurance Tech',
          }[project.category] || project.category;
          
          
          return (
            <div
              x-show={`activeTab === 'all' || activeTab === '${project.category}'`}
              x-transition
              class="group relative opacity-0"
              x-data="{ visible: false }"
              x-intersect.once="visible = true"
              x-bind:class={`visible ? 'animated fadeInUp delay-${(index + 1) * 100}' : 'opacity-0'`}
            >
              <div
                class="absolute inset-0 bg-cyber-blue/10 blur-md opacity-0 group-hover:opacity-100 transition-opacity duration-300"
              ></div>
              <a 
                href={`/projects/${project.slug}`}
                class="block border border-cyber-blue/20 bg-cyber-dark/70 backdrop-blur-sm rounded-xl overflow-hidden h-full relative hover:border-cyber-blue/50 transition-all duration-300 cursor-pointer"
              >
                <div class="h-48 overflow-hidden">
                  <img
                    src={project.images.featuredImage}
                    alt={project.title}
                    class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                  />
                  <div
                    class="absolute top-4 right-4 px-3 py-1 bg-cyber-dark/80 backdrop-blur-sm rounded-full border border-cyber-blue/30 text-xs text-cyber-blue"
                  >
                    {categoryDisplay}
                  </div>
                </div>

                <div class="p-6">
                  <h3 class="text-xl font-bold mb-2 text-cyber-blue">
                    {project.title}
                  </h3>
                  <p class="text-gray-300 mb-4">{project.description}</p>

                  <div class="flex flex-wrap gap-2 mb-6">
                    {project.technologies.slice(0, 4).map((tech) => (
                      <span
                        class="px-2 py-1 bg-cyber-blue/10 rounded-md text-xs text-cyber-blue"
                      >
                        {tech}
                      </span>
                    ))}
                  </div>

                </div>
              </a>
            </div>
          )
        })}
      </div>

      <div class="flex justify-center mt-12">
        <a 
          href="/projects" 
          class="cyber-btn bg-cyber-blue text-cyber-dark hover:bg-white transition-all duration-300 px-8 py-3 inline-flex items-center gap-2"
        >
          View All Projects
          <i class="fas fa-arrow-right"></i>
        </a>
      </div>
    </div>
  </div>
</section>